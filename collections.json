{
  "collections": [
    {
      "type": "Collection",
      "id": "workflow__convert-stac",
      "stac_extensions": [],
      "stac_version": "1.0.0",
      "description": "Convert Stac",
      "license": "N/A",
      "keywords": ["stac", "ndvi"],
      "extent": {
        "spatial": {
          "bbox": [[-180.0, -90.0, 179.99999991618097, 89.99999995809048]]
        },
        "temporal": {
          "interval": [[null, null]]
        }
      },
      "summaries": {
        "inputs": {
          "fn": {
            "label": "the operation to perform",
            "doc": "the operation to perform",
            "type": "string"
          },
          "stac": {
            "label": "the image to convert as a STAC item",
            "doc": "the image to convert as a STAC item",
            "type": "Directory"
          },
          "size": {
            "label": "the percentage for a resize operation",
            "doc": "the percentage for a resize operation",
            "type": "string"
          }
        },
        "outputs": [
          {
            "id": "converted_image",
            "type": "Directory",
            "outputSource": ["convert/results"]
          }
        ],
        "examples": [
          {
            "fn": "resize",
            "stac": "https://raw.githubusercontent.com/EOEPCA/convert/main/stac/eoepca-logo.json",
            "size": "50%"
          }
        ]
      },
      "links": [
        {
          "rel": "self",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/collections/workflow__convert-stac.json"
        },
        {
          "rel": "parent",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/catalog.json"
        },
        {
          "rel": "root",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/catalog.json"
        }
      ],
      "assets": {
        "cwl_script": {
          "href": "https://raw.githubusercontent.com/EOEPCA/deployment-guide/main/deploy/samples/requests/processing/convert-stac-app.cwl",
          "roles": ["data"],
          "type": "application/cwl"
        }
      }
    },
    {
      "type": "Collection",
      "id": "workflow__convert-url",
      "stac_extensions": [],
      "stac_version": "1.0.0",
      "description": "Convert URL",
      "license": "N/A",
      "keywords": ["stac", "ndvi"],
      "extent": {
        "spatial": {
          "bbox": [[-180.0, -90.0, 179.99999991618097, 89.99999995809048]]
        },
        "temporal": {
          "interval": [[null, null]]
        }
      },
      "summaries": {
        "inputs": {
          "fn": {
            "label": "the operation to perform",
            "doc": "the operation to perform",
            "type": "string"
          },
          "url": {
            "label": "the image to convert",
            "doc": "the image to convert",
            "type": "string"
          },
          "size": {
            "label": "the percentage for a resize operation",
            "doc": "the percentage for a resize operation",
            "type": "string"
          }
        },
        "outputs": [
          {
            "id": "converted_image",
            "type": "Directory",
            "outputSource": ["convert/results"]
          }
        ],
        "examples": [
          {
            "fn": "resize",
            "url": "https://eoepca.org/media_portal/images/logo6_med.original.png",
            "size": "50%"
          }
        ]
      },
      "links": [
        {
          "rel": "self",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/collections/workflow__convert-url.json"
        },
        {
          "rel": "parent",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/catalog.json"
        },
        {
          "rel": "root",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/catalog.json"
        }
      ],
      "assets": {
        "cwl_script": {
          "href": "https://raw.githubusercontent.com/EOEPCA/deployment-guide/main/deploy/samples/requests/processing/convert-url-app.cwl",
          "roles": ["data"],
          "type": "application/cwl"
        }
      }
    },
    {
      "type": "Collection",
      "id": "workflow__s-expression",
      "stac_extensions": [],
      "stac_version": "1.0.0",
      "description": "Applies s expressions to EO acquisitions",
      "license": "N/A",
      "keywords": ["stac", "ndvi"],
      "extent": {
        "spatial": {
          "bbox": [[-180.0, -90.0, 179.99999991618097, 89.99999995809048]]
        },
        "temporal": {
          "interval": [[null, null]]
        }
      },
      "summaries": {
        "inputs": {
          "input_reference": {
            "doc": "Input product reference",
            "label": "Input product reference",
            "type": "Directory"
          },
          "s_expression": {
            "doc": "s expression",
            "label": "s expression",
            "type": "string"
          },
          "cbn": {
            "doc": "Common band name",
            "label": "Common band name",
            "type": "string"
          }
        },
        "outputs": [
          {
            "id": "wf_outputs",
            "outputSource": ["step_1/results"],
            "type": "Directory"
          }
        ],
        "examples": [
          {
            "input_reference": "https://resource-catalogue-open.{{domain}}/csw/?mode=opensearch&service=CSW&version=3.0.0&request=GetRecords&elementsetname=full&resulttype=results&typenames=csw:Record&recordids=S2B_MSIL2A_20200902T090559_N0214_R050_T34SFH_20200902T113910.SAFE",
            "cbn": "ndvi",
            "s_expression": "(/ (- nir red) (+ nir red))"
          }
        ]
      },
      "links": [
        {
          "rel": "self",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/collections/workflow__s-expression.json"
        },
        {
          "rel": "parent",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/catalog.json"
        },
        {
          "rel": "root",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/catalog.json"
        }
      ],
      "assets": {
        "cwl_script": {
          "href": "https://raw.githubusercontent.com/EOEPCA/app-s-expression/main/app-s-expression.dev.0.0.2.cwl",
          "roles": ["data"],
          "type": "application/cwl"
        }
      }
    },
    {
      "type": "Collection",
      "id": "workflow__snuggs",
      "stac_extensions": [],
      "stac_version": "1.0.0",
      "description": "Applies s expressions to EO acquisitions",
      "license": "N/A",
      "keywords": ["stac", "ndvi"],
      "extent": {
        "spatial": {
          "bbox": [[-180.0, -90.0, 179.99999991618097, 89.99999995809048]]
        },
        "temporal": {
          "interval": [[null, null]]
        }
      },
      "summaries": {
        "inputs": {
          "input_reference": {
            "doc": "Input product reference",
            "label": "Input product reference",
            "type": "string[]"
          },
          "s_expression": {
            "doc": "s expression",
            "label": "s expression",
            "type": "string[]"
          }
        },
        "outputs": [
          {
            "id": "snuggs_outputs",
            "type": "Directory[]",
            "outputSource": ["step_1/results"]
          }
        ],
        "examples": [
          {
            "input_reference": "https://earth-search.aws.element84.com/v0/collections/sentinel-s2-l2a-cogs/items/S2A_38VNM_20221124_0_L2A",
            "s_expression": "ndvi:(/ (- B05 B03) (+ B05 B03))"
          }
        ]
      },
      "links": [
        {
          "rel": "self",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/collections/workflow__snuggs.json"
        },
        {
          "rel": "parent",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/catalog.json"
        },
        {
          "rel": "root",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/catalog.json"
        }
      ],
      "assets": {
        "cwl_script": {
          "href": "https://raw.githubusercontent.com/EOEPCA/deployment-guide/main/deploy/samples/requests/processing/snuggs-app.cwl",
          "roles": ["data"],
          "type": "application/cwl"
        }
      }
    },
    {
      "type": "Collection",
      "id": "workflow__water-bodies",
      "stac_extensions": [],
      "stac_version": "1.0.0",
      "description": "Water bodies detection based on NDWI and otsu threshold",
      "license": "N/A",
      "keywords": ["stac", "ndvi"],
      "extent": {
        "spatial": {
          "bbox": [[-180.0, -90.0, 179.99999991618097, 89.99999995809048]]
        },
        "temporal": {
          "interval": [[null, null]]
        }
      },
      "summaries": {
        "inputs": {
          "aoi": {
            "label": "area of interest",
            "doc": "area of interest as a bounding box",
            "type": "string"
          },
          "epsg": {
            "label": "EPSG code",
            "doc": "EPSG code",
            "type": "string",
            "default": "EPSG:4326"
          },
          "stac_items": {
            "label": "Sentinel-2 STAC items",
            "doc": "list of Sentinel-2 COG STAC items",
            "type": "string[]"
          },
          "bands": {
            "label": "bands used for the NDWI",
            "doc": "bands used for the NDWI",
            "type": "string[]",
            "default": ["green", "nir"]
          }
        },
        "outputs": [
          {
            "id": "stac",
            "outputSource": ["node_stac/stac_catalog"],
            "type": "Directory"
          }
        ],
        "examples": [
          {
            "stac_items": [
              "https://test.eodatahub.org.uk/catalogue-data/element84-data/collections/sentinel-2-c1-l2a/items/S2B_T42MVU_20240319T054135_L2A.json"
            ],
            "aoi": "68.09, -6.42, 69.09, -5.43",
            "epsg": "EPSG:4326",
            "bands": ["green", "nir"]
          }
        ]
      },
      "links": [
        {
          "rel": "self",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/collections/workflow__water-bodies.json"
        },
        {
          "rel": "parent",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/catalog.json"
        },
        {
          "rel": "root",
          "type": "application/json",
          "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/catalog.json"
        }
      ],
      "assets": {
        "cwl_script": {
          "href": "https://raw.githubusercontent.com/EOEPCA/deployment-guide/main/deploy/samples/requests/processing/water-bodies-app.cwl",
          "roles": ["data"],
          "type": "application/cwl"
        }
      }
    }
  ],
  "links": [
    {
      "rel": "root",
      "type": "application/json",
      "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/catalog.json"
    },
    {
      "rel": "parent",
      "type": "application/json",
      "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/catalog.json"
    },
    {
      "rel": "self",
      "type": "application/json",
      "href": "https://dev.eodatahub.org.uk/catalogue-data/public-workflows/collections.json"
    }
  ]
}
